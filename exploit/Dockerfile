# Puppeteer가 포함된 공식 베이스 이미지 사용 (Chromium 내장)
FROM ghcr.io/puppeteer/puppeteer:22

WORKDIR /app

# 필요한 라이브러리 설치
COPY package.json .
RUN npm ci --omit=dev

# 서버 코드 복사
COPY server.js .

EXPOSE 8000

# 환경변수 (필요시 docker-compose에서 override)
ENV TARGET_ORIGIN=http://web:5000 \
    ADMIN_USER=admin \
    ADMIN_PASS=temp

CMD ["node", "server.js"]

<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Login</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
  <div class="container">
  <div class="container">

  <nav>
    <div class="main-nav">
    <a href="{{ url_for('home') }}">Home</a> |
    <a href="{{ url_for('login') }}">Login</a>
    </div>
    <div class="exploit-nav">
    <a id="exploitLink" target="_blank">Exploit Server</a>
    </div>
  </nav>
<script>
  const exploitLink = document.getElementById("exploitLink");
  const protocol = window.location.protocol;
  const host = window.location.hostname;
  const url = `${protocol}//${host}:8000/exploit`; // 8000 포트 익스플로잇 서버

  // 링크 클릭 시 새 탭 열기
  exploitLink.addEventListener("click", (e) => {
    e.preventDefault(); // 기본 링크 이동 방지
    window.open(url, "_blank");
  });

  // 링크에 href도 설정
  exploitLink.href = url;
</script>
    <h1><a href="{{ url_for('home') }}">Cat Distribution System</a></h1>

    <h2>Login</h2>

    <form action="{{ url_for('login') }}" method="POST">
      {% if error %}
        <p style="color:red;">{{ error }}</p>
      {% endif %}
      <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
      <label for="username">Username:</label><br>
      <input type="text" id="username" name="username" required value="{{ last_user or '' }}"><br><br>

      <label for="password">Password:</label><br>
      <input type="password" id="password" name="password" required><br><br>

      <input type="submit" value="Login">
    </form>
  </div>
</body>
</html>